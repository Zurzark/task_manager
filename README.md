# 智能任务管理器 (Smart Task Manager) - AI Powered v3.1

## 📖 项目概述
**Smart Task Manager** 是一个基于原生 JavaScript (ES Modules) 构建的现代化、无服务器(Serverless)的任务管理应用。它深度集成了 AI 智能解析能力，结合 GTD (Getting Things Done) 与四象限工作法，旨在提供轻量、高效且隐私安全的个人任务管理解决方案。

本项目坚持 **"No Build"** 理念，无需 Node.js 构建流程，开箱即用，代码结构清晰，适合学习原生 JS 架构或作为个人生产力工具使用。

---

## ✨ 核心功能

### 1. 🤖 AI 智能增强
- **自然语言交互**: 在输入框直接输入 "明天上午10点开会 @#12"，AI 自动识别时间、关联任务、优先级。
- **智能上下文**: 内置 RAG (检索增强生成) 机制，根据任务描述自动检索相关的"记忆片段"，辅助 AI 更精准地理解用户意图。
- **记忆库系统**: 记录用户的长期偏好、工作习惯或项目背景，AI 会在解析任务时参考这些信息。

### 2. 📊 多维视图管理
- **列表视图 (List)**: 经典清单模式，支持批量操作、拖拽排序。
- **看板视图 (Kanban)**: 类似 Trello 的状态流转管理 (待开始 -> 进行中 -> 已完成)。
- **日历视图 (Calendar)**: 基于时间的月/周视图，直观展示任务排期。
- **四象限视图 (Quadrant)**: 基于重要/紧急程度的矩阵管理，聚焦"重要且紧急"的事务。

### 3. 🎯 高级任务属性
- **GTD 行动体系**: 支持 `Next` (下一步), `Waiting` (等待), `Someday` (将来) 等行动属性。
- **青蛙任务 (Frog)**: 标记每日最重要的 "三只青蛙"，优先击破。
- **依赖管理**: 支持任务间的父子关系与阻塞依赖，通过 `@#ID` 语法快速关联。
- **标签系统**: 灵活的 Tag 管理，支持多维度分类。

### 4. 🔍 强大的筛选与交互
- **组合筛选**: 支持按状态、行动类型、青蛙标记、创建时间范围、截止时间范围等多维度组合筛选。
- **批量操作**: 列表视图下支持多选任务，进行批量完成、批量删除。
- **快捷键支持**: `Ctrl+Enter` 快速触发 AI 解析。

### 5. 🛡️ 数据隐私与安全
- **本地存储**: 所有数据存储于浏览器 `LocalStorage`，不上传任何服务器（除调用 LLM API 外）。
- **备份恢复**: 支持全量数据导出为 JSON 文件，随时备份或迁移数据。

---

## 📂 项目文件结构

```text
d:\小工具\web_project\task_manager\
├── index.html                  # [入口] 应用主页面，包含整体 DOM 结构与 UI 骨架
├── css/
│   ├── style.css               # 全局自定义样式与 Tailwind 补丁
│   └── remixicon.css           # 图标库资源
├── js/
│   ├── main.js                 # [启动] 应用入口，负责初始化、全局事件监听
│   ├── actions.js              # [桥接] 将模块方法暴露给 window 对象 (适配 HTML onclick)
│   ├── store.js                # [数据] 核心状态管理 (Store)，负责 CRUD 与持久化
│   ├── memory.js               # [记忆] AI 记忆库管理 (MemoryStore)
│   ├── views.js                # [渲染] 纯函数组件，生成各视图的 HTML 字符串
│   ├── api.js                  # [服务] LLM API 调用封装 (Fetch Wrapper)
│   ├── utils.js                # [工具] 通用辅助函数 (时间、ID、JSON处理)
│   ├── tailwindcss.js          # [库] 本地集成的 Tailwind CSS 引擎
│   │
│   ├── ui/                     # [界面] UI 交互逻辑拆分
│   │   ├── core.js             # UI 核心调度 (updateUI, 侧边栏统计)
│   │   ├── modal-task.js       # 任务编辑/详情弹窗逻辑
│   │   ├── modal-settings.js   # 设置、API配置、日志弹窗
│   │   ├── modal-memory.js     # 记忆库管理弹窗
│   │   ├── modal-ai.js         # AI 确认弹窗
│   │   └── tag-input.js        # 标签输入组件逻辑
│   │
│   └── features/               # [业务] 独立业务模块
│       ├── ai.js               # AI 解析流程控制 (Prompt构建 -> 调用 -> 回调)
│       └── backup.js           # 数据备份与恢复逻辑
└── README.md                   # 本文档
```

---

## 🛠️ 技术架构说明

### 1. 模块化设计 (ES Modules)
项目完全采用 ES6 Modules 规范，通过 `<script type="module">` 引入。
- **解耦**: 业务逻辑 (`features/`)、UI 逻辑 (`ui/`) 和数据层 (`store.js`) 分离。
- **桥接**: 由于 Module 作用域隔离，`actions.js` 充当桥梁，将需要 HTML `onclick` 调用的函数挂载到 `window` 全局对象。

### 2. 状态管理 (Store Pattern)
`js/store.js` 实现了一个简易的响应式 Store：
- 维护 `tasks` (任务数据) 和 `config` (用户配置)。
- 所有数据变更 (Add/Update/Delete) 必须通过 Store 方法触发。
- Store 操作完成后自动同步 `LocalStorage` 并触发 UI 更新。

### 3. AI 工作流 (RAG Lite)
1. **User Input**: 用户输入自然语言指令。
2. **Context Retrieval**: `memoryStore` 检索相关的用户记忆。
3. **Prompt Engineering**: 结合当前任务列表(用于引用)和记忆，构建 Prompt。
4. **LLM Execution**: 调用配置的 LLM API。
5. **Human-in-the-loop**: 解析结果展示给用户确认，修正后再写入 Store。

---

## 🚀 快速开始

### 1. 环境准备
- 只需要一个现代浏览器 (Chrome, Edge, Firefox 等)。
- **推荐**: 使用 VS Code 的 **Live Server** 插件运行，以避免 `file://` 协议下的模块跨域安全限制。

### 2. 运行项目
1. 克隆或下载本项目。
2. 在项目根目录启动 HTTP 服务 (如 `python -m http.server` 或 Live Server)。
3. 浏览器访问 `http://localhost:5500/index.html`。

### 3. 配置 AI
1. 点击左侧边栏底部的 **"设置"**。
2. 输入你的 LLM API 地址 (Base URL) 和 API Key。
3. 选择模型 (如 `gpt-4o`, `deepseek-chat` 等)。
4. 保存配置。

---

## 📝 开发指南

如果你想为项目贡献代码或进行二次开发：

1. **修改 UI**: 
   - 页面骨架在 `index.html`。
   - 视图渲染逻辑在 `js/views.js` (生成 HTML 字符串)。
   - 交互逻辑在 `js/ui/*.js`。

2. **修改业务**:
   - 任务数据结构定义在 `js/store.js`。
   - AI 解析逻辑在 `js/features/ai.js`。

3. **新增全局事件**:
   - 如果你在 HTML 中写了 `onclick="window.myFunc()"`, 必须在 `js/actions.js` 中引入并挂载 `myFunc`。

---

## ⚠️ 注意事项
- **数据安全**: 清除浏览器缓存会丢失所有数据，请务必定期使用 "备份" 功能下载 JSON 文件。
- **兼容性**: 依赖 ES6+ 特性，不支持 IE 浏览器。
- **Token 消耗**: 记忆库越多，发送给 AI 的 Context 越长，请关注 Token 使用情况 (可在"调用记录"中查看)。

---
*Generated by Trae AI Assistant*
